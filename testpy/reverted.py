import os, time, random, requests
from web3 import Web3
from eth_account import Account
from dotenv import load_dotenv

load_dotenv()

a = Web3(Web3.HTTPProvider('https://rpc.taiko.xyz'))

b = os.getenv('PRIVATE_KEY')
c = Account.from_key(b)
d = c.address

print("Wallet Address:", d)

e = '0x04830cfCED9772b8ACbAF76Cfc7A630Ad82c9148'
if not Web3.is_checksum_address(e):
    e = Web3.to_checksum_address(e)

f = [{"constant":False,"inputs":[{"name":"data","type":"bytes[]"}],"name":"multicall","outputs":[{"name":"","type":"bytes[]"}],"payable":False,"stateMutability":"nonpayable","type":"function"}]

g = a.eth.contract(address=e, abi=f)

h, i = '0x07d83526730c7438048D55A4fc0b850e2aaB6f0b', '0xA51894664A773981C6C112C43ce576f315d5b1B6'

def j(k, l):
    try:
        m = a.eth.get_transaction_count(d)
        n = g.functions.multicall(k).build_transaction({'chainId': 167000,'gas': 2000000,'gasPrice': l,'nonce': m})
        o = a.eth.account.sign_transaction(n, private_key=b)
        p = a.eth.send_raw_transaction(o.rawTransaction)
        return p
    except ValueError as q:
        print(f"Transaction failed: {q}")
        return None

def r():
    s = int(input("Enter the number of swap transactions to run: "))
    t = 0
    u = random.randint(50, 80)

    v = ['0x115ff67e00000000000000000000000000000000000000000000000000000000', '0x0000002000000000000000000000000000000000000000000000000000000000', '0x000000a0000000000000000000000000c68f177ac0465c51e6cf37cb40681428', '0x02f69a7800000000000000000000000000000000000000000000000000000000', '0x00030d4000000000000000000000000000000000000000000000000000003527', '0x408b0aac00000000000000000000000000000000000000000000000000000000', '0x66695f6000000000000000000000000000000000000000000000000000000000', '0x0000002b07d83526730c7438048d55a4fc0b850e2aab6f0b000bb8a51894664a', '0x773981c6c112c43ce576f315d5b1b60000000000000000000000000000000000', '0x0000000000000000000000000000000000000000000000000000000000000000', '0x0000000000000000000000000000000000000000000000000000000000000004', '0x12210e8a00000000000000000000000000000000000000000000000000000000']

    w = ['0x75ceafe600000000000000000000000000000000000000000000000000000000', '0x0000002000000000000000000000000000000000000000000000000000000000', '0x000000a000000000000000000000000000000000000000000000000000000000', '0x0000000000000000000000000000000000000000000000000000000000000000', '0x00061a80000000000000000000000000000000000000000000000000000063b9', '0x12d53dfe00000000000000000000000000000000000000000000000000000000', '0x6669584600000000000000000000000000000000000000000000000000000000', '0x0000002b07d83526730c7438048d55a4fc0b850e2aab6f0b000bb8a51894664a', '0x773981c6c112c43ce576f315d5b1b60000000000000000000000000000000000', '0x0000000000000000000000000000000000000000000000000000000000000000', '0x0000000000000000000000000000000000000000000000000000000000000044', '0x49404b7c00000000000000000000000000000000000000000000000000000000', '0x00000000000000000000000000000000c68f177ac0465c51e6cf37cb40681428', '0x02f69a7800000000000000000000000000000000000000000000000000000000']

    while t < s:
        if t % 2 == 0:
            x = v
        else:
            x = w

        y = 200
        z = j(x, y)
        if z:
            print(f"Transaction sent: https://taikoscan.io/tx/{z.hex()}")
        else:
            print("Transaction failed, skipping to the next swap.")

        t += 1
        time.sleep(u)

if __name__ == "__main__":
    r()
